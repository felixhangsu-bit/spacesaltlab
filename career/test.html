<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>èŒä¸šæ€§æ ¼æµ‹è¯„ | å®‡å®™è®¤çŸ¥ç›ç©¶æ‰€</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root {
  --primary: #6366f1;
  --primary-dark: #4f46e5;
  --primary-light: #a5b4fc;
  --gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  --bg: #f8fafc;
  --card: #ffffff;
  --text: #1e293b;
  --text-muted: #64748b;
  --border: #e2e8f0;
  --shadow: 0 4px 20px rgba(0,0,0,0.08);
  --radius: 16px;
}
* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: 'Noto Sans SC', sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; }
.page { display: none; min-height: 100vh; }
.page.active { display: block; }
#testPage { background: var(--bg); padding: 20px; }
.test-container { max-width: 700px; margin: 0 auto; }
.test-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; }
.back-btn { display: flex; align-items: center; gap: 6px; background: none; border: none; color: var(--text-muted); font-size: 14px; cursor: pointer; padding: 8px 12px; border-radius: 8px; transition: all 0.2s; }
.back-btn:hover { background: white; color: var(--text); }
.progress-wrap { text-align: right; }
.progress-text { font-size: 13px; color: var(--text-muted); margin-bottom: 6px; }
.progress-bar { width: 180px; height: 6px; background: var(--border); border-radius: 3px; overflow: hidden; }
.progress-fill { height: 100%; background: var(--gradient); border-radius: 3px; transition: width 0.3s; }
.question-card { background: var(--card); border-radius: var(--radius); padding: 40px; box-shadow: var(--shadow); }
.dim-tag { display: inline-block; padding: 6px 14px; border-radius: 20px; font-size: 12px; font-weight: 500; margin-bottom: 16px; }
.q-num { font-size: 13px; color: var(--text-muted); margin-bottom: 10px; }
.q-text { font-size: 20px; font-weight: 600; line-height: 1.5; margin-bottom: 32px; }
.options { display: flex; flex-direction: column; gap: 12px; }
.opt { display: flex; align-items: center; gap: 14px; padding: 16px 20px; border: 2px solid var(--border); border-radius: 12px; cursor: pointer; transition: all 0.2s; }
.opt:hover { border-color: var(--primary-light); background: #fafaff; }
.opt.selected { border-color: var(--primary); background: linear-gradient(135deg, #ede9fe 0%, #e0e7ff 100%); }
.opt-radio { width: 22px; height: 22px; border: 2px solid var(--border); border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: all 0.2s; }
.opt.selected .opt-radio { border-color: var(--primary); background: var(--primary); }
.opt.selected .opt-radio::after { content: ''; width: 8px; height: 8px; background: white; border-radius: 50%; }
.opt-text { font-size: 15px; }
.nav-btns { display: flex; justify-content: space-between; margin-top: 28px; }
.nav-btn { padding: 12px 28px; border-radius: 10px; font-size: 15px; font-weight: 500; cursor: pointer; transition: all 0.2s; }
.nav-btn.secondary { background: white; border: 2px solid var(--border); color: var(--text); }
.nav-btn.secondary:hover { border-color: var(--primary); color: var(--primary); }
.nav-btn.primary { background: var(--primary); border: none; color: white; }
.nav-btn.primary:hover { background: var(--primary-dark); }
.nav-btn:disabled { opacity: 0.5; cursor: not-allowed; }
#resultPage { background: linear-gradient(180deg, #667eea 0%, #764ba2 40%, var(--bg) 40%); }
.result-container { max-width: 800px; margin: 0 auto; padding: 40px 20px; }
.result-header { text-align: center; color: white; padding: 20px 0 60px; }
.result-header h1 { font-size: 28px; margin-bottom: 8px; }
.result-header p { opacity: 0.9; }
.card { background: var(--card); border-radius: var(--radius); padding: 32px; box-shadow: var(--shadow); margin-bottom: 20px; }
.section-icon { width: 44px; height: 44px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 22px; margin-bottom: 16px; }
.section-title { font-size: 18px; font-weight: 600; margin-bottom: 16px; display: flex; align-items: center; gap: 10px; }
.type-badge { display: inline-block; padding: 8px 20px; background: var(--gradient); color: white; border-radius: 20px; font-size: 13px; font-weight: 500; margin-bottom: 14px; }
.type-name { font-size: 28px; font-weight: 700; margin-bottom: 12px; background: var(--gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
.type-desc { color: var(--text-muted); font-size: 15px; line-height: 1.8; }
.stat-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin-top: 20px; }
.stat-card { padding: 16px; background: #f8fafc; border-radius: 12px; text-align: center; }
.stat-value { font-size: 24px; font-weight: 700; color: var(--primary); }
.stat-label { font-size: 12px; color: var(--text-muted); margin-top: 4px; }
.dim-item { margin-bottom: 20px; }
.dim-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
.dim-name { display: flex; align-items: center; gap: 8px; font-weight: 500; }
.dim-icon { width: 28px; height: 28px; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 14px; }
.dim-score { font-weight: 600; color: var(--primary); }
.dim-bar { height: 8px; background: var(--border); border-radius: 4px; overflow: hidden; margin-bottom: 12px; position: relative; }
.dim-bar-fill { height: 100%; border-radius: 4px; transition: width 0.5s; }
.dim-bar-center { position: absolute; left: 50%; top: 0; bottom: 0; width: 2px; background: var(--text-muted); }
.dim-labels { display: flex; justify-content: space-between; font-size: 12px; color: var(--text-muted); }
.dim-analysis { font-size: 14px; color: var(--text-muted); line-height: 1.7; margin-top: 8px; padding: 12px; background: #f8fafc; border-radius: 8px; }
.career-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-top: 16px; }
.career-item { padding: 14px; background: linear-gradient(135deg, #ede9fe 0%, #e0e7ff 100%); border-radius: 10px; font-size: 14px; text-align: center; }
.strength-list { margin-top: 16px; }
.strength-item { display: flex; gap: 12px; margin-bottom: 12px; padding: 14px; background: #f0fdf4; border-radius: 10px; }
.strength-icon { font-size: 20px; }
.weakness-item { background: #fef2f2; }
.celeb-box { display: flex; gap: 20px; align-items: center; padding: 20px; background: #f8fafc; border-radius: 14px; margin-top: 16px; }
.celeb-avatar { width: 70px; height: 70px; background: var(--gradient); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; flex-shrink: 0; }
.celeb-info h4 { font-size: 16px; margin-bottom: 4px; }
.celeb-info p { font-size: 13px; color: var(--text-muted); line-height: 1.6; }
.tip-item { display: flex; gap: 14px; padding: 16px; background: #f8fafc; border-radius: 12px; margin-bottom: 10px; border-left: 4px solid var(--primary); }
.tip-num { width: 26px; height: 26px; background: var(--primary); color: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 13px; font-weight: 600; flex-shrink: 0; }
.tip-text { font-size: 14px; color: var(--text-muted); line-height: 1.6; }
.download-section { text-align: center; padding: 32px; }
.download-btn { display: inline-flex; align-items: center; gap: 10px; padding: 14px 28px; background: var(--gradient); color: white; border: none; border-radius: 12px; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
.download-btn:hover { transform: translateY(-2px); box-shadow: 0 10px 25px rgba(102,126,234,0.35); }
.restart-btn { display: inline-flex; align-items: center; gap: 6px; margin-top: 14px; padding: 10px 20px; background: transparent; border: 2px solid var(--border); border-radius: 10px; font-size: 13px; color: var(--text-muted); cursor: pointer; transition: all 0.2s; }
.restart-btn:hover { border-color: var(--primary); color: var(--primary); }
.loading { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); display: flex; align-items: center; justify-content: center; z-index: 9999; opacity: 0; visibility: hidden; transition: all 0.3s; }
.loading.show { opacity: 1; visibility: visible; }
.loading-box { background: white; padding: 36px; border-radius: 16px; text-align: center; }
.spinner { width: 44px; height: 44px; border: 4px solid var(--border); border-top-color: var(--primary); border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 16px; }
@keyframes spin { to { transform: rotate(360deg); } }
.modal-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); display: flex; align-items: center; justify-content: center; z-index: 9999; opacity: 0; visibility: hidden; transition: all 0.3s; }
.modal-overlay.show { opacity: 1; visibility: visible; }
.modal-content { background: white; padding: 36px; border-radius: 20px; max-width: 400px; width: 90%; text-align: center; transform: scale(0.9); transition: transform 0.3s; }
.modal-overlay.show .modal-content { transform: scale(1); }
.modal-icon { font-size: 48px; margin-bottom: 16px; }
.modal-content h3 { font-size: 22px; font-weight: 700; margin-bottom: 12px; background: var(--gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
.modal-content > p { color: var(--text-muted); font-size: 14px; line-height: 1.6; margin-bottom: 20px; }
.modal-tests { background: #f8fafc; border-radius: 12px; padding: 16px; margin-bottom: 16px; }
.modal-test-item { padding: 10px; font-size: 14px; color: var(--text); border-bottom: 1px solid var(--border); }
.modal-test-item:last-child { border-bottom: none; }
.modal-tip { font-size: 13px; color: var(--primary); font-weight: 500; margin-bottom: 20px; }
.modal-buttons { display: flex; flex-direction: column; gap: 10px; }
.modal-btn { padding: 14px 24px; border-radius: 10px; font-size: 15px; font-weight: 600; cursor: pointer; transition: all 0.2s; border: none; }
.modal-btn.primary { background: var(--gradient); color: white; }
.modal-btn.secondary { background: transparent; border: 2px solid var(--border); color: var(--text-muted); }
.more-tests-btn { background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%); border-color: #f59e0b; color: #92400e; }
@media (max-width: 640px) {
  .stat-grid { grid-template-columns: repeat(2, 1fr); }
  .career-grid { grid-template-columns: 1fr; }
  .celeb-box { flex-direction: column; text-align: center; }
  .question-card { padding: 28px 20px; }
  .q-text { font-size: 18px; }
}
</style>
</head>
<body>

<div id="testPage" class="page active">
  <div class="test-container">
    <div class="test-header">
      <button class="back-btn" onclick="exitTest()">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        é€€å‡ºæµ‹è¯•
      </button>
      <div class="progress-wrap">
        <div class="progress-text"><span id="current">1</span> / 60</div>
        <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
      </div>
    </div>
    <div class="question-card">
      <div class="dim-tag" id="dimTag">èƒ½é‡æ¥æº</div>
      <div class="q-num">é—®é¢˜ <span id="qNum">1</span></div>
      <div class="q-text" id="qText"></div>
      <div class="options" id="options"></div>
      <div class="nav-btns">
        <button class="nav-btn secondary" id="prevBtn" onclick="prevQ()">ä¸Šä¸€é¢˜</button>
        <button class="nav-btn primary" id="nextBtn" onclick="nextQ()">ä¸‹ä¸€é¢˜</button>
      </div>
    </div>
  </div>
</div>

<div id="resultPage" class="page">
  <div class="result-container">
    <div class="result-header">
      <h1>ğŸ’¼ èŒä¸šæ€§æ ¼æµ‹è¯„æŠ¥å‘Š</h1>
      <p>å®‡å®™è®¤çŸ¥ç›ç©¶æ‰€ Â· Space Salt Lab</p>
    </div>
    <div id="resultContent"></div>
  </div>
</div>

<div class="loading" id="loading">
  <div class="loading-box">
    <div class="spinner"></div>
    <p>æ­£åœ¨ç”ŸæˆæŠ¥å‘Š...</p>
  </div>
</div>

<script>
// 60é“MBTIæµ‹è¯„é¢˜ç›®
const questions = [
  // E-I èƒ½é‡æ¥æº (15é¢˜)
  { dim: 'EI', text: 'åœ¨ç¤¾äº¤èšä¼šä¸­ï¼Œä½ é€šå¸¸ä¼šï¼Ÿ', options: ['ä¸»åŠ¨ç»“è¯†æ–°æœ‹å‹ï¼Œäº«å—çƒ­é—¹æ°›å›´', 'å€¾å‘äºå’Œç†Ÿæ‚‰çš„äººå¾…åœ¨ä¸€èµ·'] },
  { dim: 'EI', text: 'ç‹¬å¤„ä¸€æ®µæ—¶é—´åï¼Œä½ ä¼šæ„Ÿåˆ°ï¼Ÿ', options: ['æœ‰ç‚¹æ— èŠï¼Œæƒ³æ‰¾äººèŠå¤©', 'ç²¾åŠ›å……æ²›ï¼Œæ„Ÿè§‰å¾ˆå¥½'] },
  { dim: 'EI', text: 'å·¥ä½œä¸­é‡åˆ°é—®é¢˜æ—¶ï¼Œä½ æ›´å€¾å‘äºï¼Ÿ', options: ['ç«‹å³æ‰¾åŒäº‹è®¨è®ºè§£å†³æ–¹æ¡ˆ', 'å…ˆè‡ªå·±æ€è€ƒï¼Œå¿…è¦æ—¶å†è¯·æ•™ä»–äºº'] },
  { dim: 'EI', text: 'å‘¨æœ«ç†æƒ³çš„æ”¾æ¾æ–¹å¼æ˜¯ï¼Ÿ', options: ['å’Œæœ‹å‹èšä¼šæˆ–å‚åŠ æ´»åŠ¨', 'åœ¨å®¶çœ‹ä¹¦ã€è¿½å‰§æˆ–åšè‡ªå·±çš„äº‹'] },
  { dim: 'EI', text: 'åœ¨å›¢é˜Ÿé¡¹ç›®ä¸­ï¼Œä½ æ›´å–œæ¬¢ï¼Ÿ', options: ['é¢‘ç¹çš„å°ç»„è®¨è®ºå’Œå¤´è„‘é£æš´', 'å„è‡ªå®Œæˆåˆ†å·¥åå†æ±‡æ€»'] },
  { dim: 'EI', text: 'å½“ä½ æœ‰å¥½æ¶ˆæ¯æ—¶ï¼Œä½ ä¼šï¼Ÿ', options: ['ç«‹åˆ»åˆ†äº«ç»™å¾ˆå¤šäºº', 'åªå‘Šè¯‰å°‘æ•°äº²å¯†çš„äºº'] },
  { dim: 'EI', text: 'å‚åŠ å¤§å‹ä¼šè®®æˆ–æ´»åŠ¨åï¼Œä½ é€šå¸¸ï¼Ÿ', options: ['æ„Ÿåˆ°å…´å¥‹å’Œå……æ»¡æ´»åŠ›', 'éœ€è¦ç‹¬å¤„ä¸€æ®µæ—¶é—´æ¢å¤ç²¾åŠ›'] },
  { dim: 'EI', text: 'åœ¨æ€è€ƒé—®é¢˜æ—¶ï¼Œä½ æ›´å€¾å‘äºï¼Ÿ', options: ['è¾¹è¯´è¾¹æƒ³ï¼Œé€šè¿‡è®¨è®ºç†æ¸…æ€è·¯', 'åœ¨è„‘æµ·ä¸­é»˜é»˜æ€è€ƒ'] },
  { dim: 'EI', text: 'ä½ æ›´å–œæ¬¢çš„å·¥ä½œç¯å¢ƒæ˜¯ï¼Ÿ', options: ['å¼€æ”¾å¼åŠå…¬ï¼Œéšæ—¶å¯ä»¥äº¤æµ', 'ç‹¬ç«‹ç©ºé—´ï¼Œå‡å°‘å¹²æ‰°'] },
  { dim: 'EI', text: 'è®¤è¯†æ–°æœ‹å‹æ—¶ï¼Œä½ é€šå¸¸ï¼Ÿ', options: ['å¾ˆå¿«å°±èƒ½ç†Ÿç»œèµ·æ¥', 'éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½æ•å¼€å¿ƒæ‰‰'] },
  { dim: 'EI', text: 'ä½ è§‰å¾—è‡ªå·±çš„æœ‹å‹åœˆï¼Ÿ', options: ['å¹¿æ³›ï¼Œè®¤è¯†å¾ˆå¤šäºº', 'ç²¾ç®€ï¼Œä½†å…³ç³»éƒ½å¾ˆæ·±'] },
  { dim: 'EI', text: 'åœ¨æ¼”è®²æˆ–å±•ç¤ºæ—¶ï¼Œä½ æ„Ÿåˆ°ï¼Ÿ', options: ['å…´å¥‹ï¼Œäº«å—è¢«å…³æ³¨çš„æ„Ÿè§‰', 'ç´§å¼ ï¼Œæ›´å–œæ¬¢å¹•åå·¥ä½œ'] },
  { dim: 'EI', text: 'åšå†³å®šæ—¶ï¼Œä½ æ›´å€¾å‘äºï¼Ÿ', options: ['å¾æ±‚å¤šäººæ„è§åå†³å®š', 'ç‹¬ç«‹æ€è€ƒåè‡ªå·±å†³å®š'] },
  { dim: 'EI', text: 'ä½ çš„èƒ½é‡ä¸»è¦æ¥è‡ªäºï¼Ÿ', options: ['ä¸ä»–äººäº’åŠ¨å’Œäº¤æµ', 'ç‹¬å¤„å’Œå†…å¿ƒåæ€'] },
  { dim: 'EI', text: 'ç”µè¯å“èµ·æ—¶ï¼Œä½ çš„ç¬¬ä¸€ååº”æ˜¯ï¼Ÿ', options: ['é«˜å…´æœ‰äººæ‰¾ï¼Œç«‹åˆ»æ¥å¬', 'å¸Œæœ›å¯¹æ–¹å‘çŸ­ä¿¡å°±å¥½'] },

  // S-N ä¿¡æ¯è·å– (15é¢˜)
  { dim: 'SN', text: 'åœ¨å­¦ä¹ æ–°æŠ€èƒ½æ—¶ï¼Œä½ æ›´å–œæ¬¢ï¼Ÿ', options: ['æŒ‰æ­¥éª¤ä¸€æ­¥æ­¥å®æ“ç»ƒä¹ ', 'å…ˆç†è§£æ•´ä½“æ¦‚å¿µå’ŒåŸç†'] },
  { dim: 'SN', text: 'æè¿°ä¸€ä»¶äº‹æƒ…æ—¶ï¼Œä½ å€¾å‘äºï¼Ÿ', options: ['å…³æ³¨å…·ä½“ç»†èŠ‚å’Œäº‹å®', 'å¼ºè°ƒæ•´ä½“æ„ä¹‰å’Œå¯èƒ½æ€§'] },
  { dim: 'SN', text: 'ä½ æ›´ä¿¡ä»»ï¼Ÿ', options: ['äº²èº«ç»å†å’Œå®é™…ç»éªŒ', 'ç›´è§‰å’Œçµæ„Ÿ'] },
  { dim: 'SN', text: 'é˜…è¯»æ—¶ï¼Œä½ æ›´å–œæ¬¢ï¼Ÿ', options: ['å®ç”¨æ€§å¼ºçš„æŒ‡å—ç±»ä¹¦ç±', 'å¯Œæœ‰æƒ³è±¡åŠ›çš„å°è¯´æˆ–ç†è®º'] },
  { dim: 'SN', text: 'åœ¨å·¥ä½œä¸­ï¼Œä½ æ›´æ“…é•¿ï¼Ÿ', options: ['å¤„ç†å…·ä½“çš„ã€æ˜ç¡®çš„ä»»åŠ¡', 'å‘ç°æ–°çš„å¯èƒ½æ€§å’Œåˆ›æ„'] },
  { dim: 'SN', text: 'ä½ æ›´å…³æ³¨ï¼Ÿ', options: ['å½“ä¸‹æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…', 'æœªæ¥çš„å¯èƒ½æ€§å’Œè¶‹åŠ¿'] },
  { dim: 'SN', text: 'è§£å†³é—®é¢˜æ—¶ï¼Œä½ æ›´ä¾èµ–ï¼Ÿ', options: ['å·²è¢«éªŒè¯çš„æ–¹æ³•å’Œç»éªŒ', 'åˆ›æ–°çš„æƒ³æ³•å’Œç›´è§‰'] },
  { dim: 'SN', text: 'ä½ è§‰å¾—è‡ªå·±æ›´ï¼Ÿ', options: ['è„šè¸å®åœ°ï¼ŒåŠ¡å®å¯é ', 'å¯Œæœ‰æƒ³è±¡åŠ›ï¼Œå–œæ¬¢åˆ›æ–°'] },
  { dim: 'SN', text: 'æ¥æ”¶ä¿¡æ¯æ—¶ï¼Œä½ æ›´æ³¨é‡ï¼Ÿ', options: ['å…·ä½“çš„æ•°æ®å’Œäº‹å®', 'èƒŒåçš„æ„ä¹‰å’Œè”ç³»'] },
  { dim: 'SN', text: 'è§„åˆ’æ—…è¡Œæ—¶ï¼Œä½ æ›´å€¾å‘äºï¼Ÿ', options: ['è¯¦ç»†å®‰æ’æ¯å¤©çš„è¡Œç¨‹', 'åªå®šå¤§æ–¹å‘ï¼Œéšæ€§å‘æŒ¥'] },
  { dim: 'SN', text: 'åœ¨è®¨è®ºä¸­ï¼Œä½ æ›´å…³æ³¨ï¼Ÿ', options: ['è®¨è®ºçš„å…·ä½“å†…å®¹å’Œç»†èŠ‚', 'è®¨è®ºå¼•å‘çš„æ–°æƒ³æ³•'] },
  { dim: 'SN', text: 'ä½ çš„è®°å¿†æ–¹å¼æ›´å€¾å‘äºï¼Ÿ', options: ['è®°ä½å…·ä½“çš„äº‹ä»¶å’Œç»†èŠ‚', 'è®°ä½æ•´ä½“å°è±¡å’Œæ„Ÿå—'] },
  { dim: 'SN', text: 'é¢å¯¹è¯´æ˜ä¹¦ï¼Œä½ ä¼šï¼Ÿ', options: ['ä»å¤´åˆ°å°¾ä»”ç»†é˜…è¯»', 'å¤§æ¦‚æµè§ˆåç›´æ¥ä¸Šæ‰‹'] },
  { dim: 'SN', text: 'ä½ æ›´æ¬£èµçš„å“è´¨æ˜¯ï¼Ÿ', options: ['ç¨³é‡ã€å¯é ã€æ³¨é‡ç»†èŠ‚', 'åˆ›æ–°ã€çµæ´»ã€å¯Œæœ‰è¿œè§'] },
  { dim: 'SN', text: 'åœ¨é¡¹ç›®ä¸­ï¼Œä½ æ›´æ“…é•¿ï¼Ÿ', options: ['æ‰§è¡Œå’Œè½å®è®¡åˆ’', 'æ„æ€å’Œè§„åˆ’æ„¿æ™¯'] },

  // T-F å†³ç­–æ–¹å¼ (15é¢˜)
  { dim: 'TF', text: 'åšå†³å®šæ—¶ï¼Œä½ æ›´çœ‹é‡ï¼Ÿ', options: ['é€»è¾‘åˆ†æå’Œå®¢è§‚äº‹å®', 'å¯¹äººçš„å½±å“å’Œä»·å€¼è§‚'] },
  { dim: 'TF', text: 'å½“æœ‹å‹å‘ä½ å€¾è¯‰æ—¶ï¼Œä½ æ›´å€¾å‘äºï¼Ÿ', options: ['å¸®ä»–ä»¬åˆ†æé—®é¢˜ã€æä¾›å»ºè®®', 'å€¾å¬å¹¶ç»™äºˆæƒ…æ„Ÿæ”¯æŒ'] },
  { dim: 'TF', text: 'åœ¨å›¢é˜Ÿå†²çªä¸­ï¼Œä½ æ›´å…³æ³¨ï¼Ÿ', options: ['è°çš„è§‚ç‚¹æ›´æœ‰é“ç†', 'å¦‚ä½•ç»´æŠ¤å›¢é˜Ÿå’Œè°'] },
  { dim: 'TF', text: 'ç»™ä»–äººåé¦ˆæ—¶ï¼Œä½ æ›´å€¾å‘äºï¼Ÿ', options: ['ç›´æ¥æŒ‡å‡ºé—®é¢˜å’Œæ”¹è¿›ç‚¹', 'å…ˆè‚¯å®šä¼˜ç‚¹å†å§”å©‰æå»ºè®®'] },
  { dim: 'TF', text: 'ä½ è®¤ä¸ºå¥½çš„å†³ç­–åº”è¯¥æ˜¯ï¼Ÿ', options: ['åŸºäºæ•°æ®å’Œé€»è¾‘çš„', 'è€ƒè™‘åˆ°æ‰€æœ‰äººæ„Ÿå—çš„'] },
  { dim: 'TF', text: 'åˆ«äººè¯´ä½ æ›´ï¼Ÿ', options: ['ç†æ€§ã€å®¢è§‚ã€æœ‰åŸåˆ™', 'å–„è§£äººæ„ã€ä½“è´´ã€æ¸©æš–'] },
  { dim: 'TF', text: 'é¢å¯¹æ‰¹è¯„æ—¶ï¼Œä½ ä¼šï¼Ÿ', options: ['åˆ†ææ‰¹è¯„æ˜¯å¦å®¢è§‚åˆç†', 'é¦–å…ˆæ„Ÿåˆ°å—ä¼¤æˆ–æ²®ä¸§'] },
  { dim: 'TF', text: 'ä½ æ›´çœ‹é‡å·¥ä½œä¸­çš„ï¼Ÿ', options: ['å…¬å¹³å’Œæ•ˆç‡', 'å›¢é˜Ÿæ°›å›´å’Œäººé™…å…³ç³»'] },
  { dim: 'TF', text: 'åœ¨äº‰è®ºä¸­ï¼Œä½ æ›´å¯èƒ½ï¼Ÿ', options: ['åšæŒè‡ªå·±è®¤ä¸ºæ­£ç¡®çš„è§‚ç‚¹', 'å¯»æ±‚å¦¥åä»¥ç»´æŒå…³ç³»'] },
  { dim: 'TF', text: 'ä½ è§‰å¾—ä»€ä¹ˆæ›´é‡è¦ï¼Ÿ', options: ['çœŸå®ï¼Œå³ä½¿å¯èƒ½ä¼¤å®³åˆ°äºº', 'å–„æ„ï¼Œå³ä½¿éœ€è¦éšç’ä¸€äº›çœŸç›¸'] },
  { dim: 'TF', text: 'è¯„ä»·ä¸€ä¸ªæ–¹æ¡ˆæ—¶ï¼Œä½ é¦–å…ˆè€ƒè™‘ï¼Ÿ', options: ['æ–¹æ¡ˆçš„é€»è¾‘æ€§å’Œå¯è¡Œæ€§', 'æ–¹æ¡ˆå¯¹ç›¸å…³äººå‘˜çš„å½±å“'] },
  { dim: 'TF', text: 'ä½ æ›´å®¹æ˜“è¢«ä»€ä¹ˆæ‰“åŠ¨ï¼Ÿ', options: ['æœ‰ç†æœ‰æ®çš„è®ºè¯', 'çœŸæŒšçš„æƒ…æ„Ÿè¡¨è¾¾'] },
  { dim: 'TF', text: 'å¤„ç†å‘˜å·¥é—®é¢˜æ—¶ï¼Œä½ æ›´å€¾å‘äºï¼Ÿ', options: ['æŒ‰è§„ç« åˆ¶åº¦åŠäº‹', 'æ ¹æ®å…·ä½“æƒ…å†µçµæ´»å¤„ç†'] },
  { dim: 'TF', text: 'ä½ è®¤ä¸ºæˆåŠŸä¸»è¦å–å†³äºï¼Ÿ', options: ['èƒ½åŠ›å’ŒåŠªåŠ›', 'æœºé‡å’Œäººè„‰'] },
  { dim: 'TF', text: 'å½“é€»è¾‘å’Œæƒ…æ„Ÿå†²çªæ—¶ï¼Œä½ æ›´å¯èƒ½ï¼Ÿ', options: ['éµå¾ªé€»è¾‘', 'éµå¾ªæƒ…æ„Ÿ'] },

  // J-P ç”Ÿæ´»æ€åº¦ (15é¢˜)
  { dim: 'JP', text: 'ä½ æ›´å–œæ¬¢çš„å·¥ä½œæ–¹å¼æ˜¯ï¼Ÿ', options: ['æœ‰æ˜ç¡®çš„è®¡åˆ’å’Œæˆªæ­¢æ—¥æœŸ', 'çµæ´»åº”å˜ï¼Œä¿æŒå¼€æ”¾æ€§'] },
  { dim: 'JP', text: 'é¢å¯¹ä»»åŠ¡æ—¶ï¼Œä½ é€šå¸¸ï¼Ÿ', options: ['å°½æ—©å¼€å§‹ï¼ŒæŒ‰è®¡åˆ’å®Œæˆ', 'ç­‰åˆ°çµæ„Ÿæ¥äº†æˆ–ä¸´è¿‘æˆªæ­¢æ—¶'] },
  { dim: 'JP', text: 'ä½ çš„å·¥ä½œåŒºåŸŸé€šå¸¸æ˜¯ï¼Ÿ', options: ['æ•´æ´æœ‰åºï¼Œç‰©å“åˆ†ç±»æ¸…æ¥š', 'çœ‹èµ·æ¥æœ‰ç‚¹ä¹±ä½†è‡ªå·±èƒ½æ‰¾åˆ°ä¸œè¥¿'] },
  { dim: 'JP', text: 'åˆ¶å®šè®¡åˆ’åï¼Œä½ ä¼šï¼Ÿ', options: ['å°½é‡æŒ‰è®¡åˆ’æ‰§è¡Œ', 'æŠŠè®¡åˆ’å½“ä½œå‚è€ƒï¼Œéšæ—¶è°ƒæ•´'] },
  { dim: 'JP', text: 'ä½ æ›´äº«å—ï¼Ÿ', options: ['å®Œæˆä»»åŠ¡åçš„æˆå°±æ„Ÿ', 'æ¢ç´¢è¿‡ç¨‹ä¸­çš„æ–°å‘ç°'] },
  { dim: 'JP', text: 'å‘¨æœ«çš„è®¡åˆ’ï¼Œä½ é€šå¸¸ï¼Ÿ', options: ['æå‰å®‰æ’å¥½æ´»åŠ¨', 'åˆ°æ—¶å€™çœ‹å¿ƒæƒ…å†³å®š'] },
  { dim: 'JP', text: 'ä½ å¯¹å¾…è§„åˆ™çš„æ€åº¦æ˜¯ï¼Ÿ', options: ['è§„åˆ™åº”è¯¥è¢«éµå®ˆ', 'è§„åˆ™å¯ä»¥çµæ´»å˜é€š'] },
  { dim: 'JP', text: 'è´­ç‰©æ—¶ï¼Œä½ æ›´å€¾å‘äºï¼Ÿ', options: ['åˆ—å¥½æ¸…å•ï¼Œä¹°éœ€è¦çš„ä¸œè¥¿', 'éšæ€§é€›é€›ï¼Œçœ‹åˆ°å–œæ¬¢çš„å°±ä¹°'] },
  { dim: 'JP', text: 'ä½ æ›´å–œæ¬¢çš„ç”Ÿæ´»çŠ¶æ€æ˜¯ï¼Ÿ', options: ['ç¨³å®šå¯é¢„æµ‹', 'å……æ»¡å˜åŒ–å’ŒæƒŠå–œ'] },
  { dim: 'JP', text: 'åšå†³å®šæ—¶ï¼Œä½ é€šå¸¸ï¼Ÿ', options: ['å¿«é€Ÿå†³å®šï¼Œç„¶åæ‰§è¡Œ', 'ä¿æŒé€‰é¡¹å¼€æ”¾ï¼Œå¤šæ”¶é›†ä¿¡æ¯'] },
  { dim: 'JP', text: 'åœ¨é¡¹ç›®ä¸­ï¼Œä½ æ›´å…³æ³¨ï¼Ÿ', options: ['æŒ‰æ—¶äº¤ä»˜æˆæœ', 'æŒç»­æ”¹è¿›å’Œä¼˜åŒ–'] },
  { dim: 'JP', text: 'ä½ çš„æ—¥ç¨‹å®‰æ’é€šå¸¸æ˜¯ï¼Ÿ', options: ['è¯¦ç»†è§„åˆ’ï¼Œç²¾ç¡®åˆ°å°æ—¶', 'å¤§è‡´æ–¹å‘ï¼Œä¿æŒå¼¹æ€§'] },
  { dim: 'JP', text: 'é¢å¯¹å˜åŒ–ï¼Œä½ çš„ååº”æ˜¯ï¼Ÿ', options: ['æœ‰äº›ä¸é€‚åº”ï¼Œå–œæ¬¢æŒ‰åŸè®¡åˆ’', 'æ„Ÿåˆ°å…´å¥‹ï¼Œä¹äºæ¥å—æ–°å˜åŒ–'] },
  { dim: 'JP', text: 'ä½ æ›´è®¨åŒï¼Ÿ', options: ['è®¡åˆ’è¢«æ‰“ä¹±', 'è¢«è¿‡å¤šè§„åˆ™æŸç¼š'] },
  { dim: 'JP', text: 'å®Œæˆä¸€ä¸ªé¡¹ç›®åï¼Œä½ ä¼šï¼Ÿ', options: ['æ»¡è¶³äºå®Œæˆï¼Œå‡†å¤‡ä¸‹ä¸€ä¸ªä»»åŠ¡', 'æƒ³æƒ³è¿˜æœ‰ä»€ä¹ˆå¯ä»¥æ”¹è¿›çš„'] }
];

// 16ç§MBTIç±»å‹ç»“æœ
const RESULT_MAP = {
  'INTJ': {
    name: 'ç­–ç•¥å®¶ INTJ',
    title: 'ç‹¬ç«‹æ€è€ƒçš„æˆ˜ç•¥å¤§å¸ˆ',
    desc: 'ä½ æ˜¯ä¸€ä¸ªå…·æœ‰è¿œè§å“è¯†çš„æˆ˜ç•¥æ€è€ƒè€…ã€‚ä½ å–„äºå°†å¤æ‚çš„æƒ³æ³•è½¬åŒ–ä¸ºå¯æ‰§è¡Œçš„é•¿æœŸè®¡åˆ’ï¼Œè¿½æ±‚çŸ¥è¯†å’Œèƒ½åŠ›çš„ä¸æ–­æå‡ã€‚ä½ ç‹¬ç«‹è‡ªä¸»ï¼Œæœ‰å¼ºçƒˆçš„å†…é©±åŠ›ï¼Œç›¸ä¿¡é€šè¿‡ç†æ€§åˆ†æå’ŒæŒç»­åŠªåŠ›å¯ä»¥æ”¹å˜ç°çŠ¶ã€‚',
    strengths: ['æˆ˜ç•¥æ€§æ€ç»´', 'ç‹¬ç«‹è‡ªä¸»', 'è¿½æ±‚å“è¶Š', 'å–„äºè§„åˆ’'],
    weaknesses: ['å¯èƒ½æ˜¾å¾—å†·æ¼ ', 'å¯¹ä»–äººè¦æ±‚è¾ƒé«˜', 'ä¸å–„äºè¡¨è¾¾æƒ…æ„Ÿ'],
    careers: ['æˆ˜ç•¥é¡¾é—®', 'ç§‘ç ”å·¥ä½œè€…', 'æŠ•èµ„åˆ†æå¸ˆ', 'ç³»ç»Ÿæ¶æ„å¸ˆ', 'ç®¡ç†å’¨è¯¢å¸ˆ', 'åˆ›ä¸šè€…'],
    celeb: 'åŸƒéš†Â·é©¬æ–¯å…‹',
    celebDesc: 'ä»¥è¿œè§å’Œæˆ˜ç•¥æ€ç»´è‘—ç§°ï¼Œä¸æ–­æŒ‘æˆ˜ä¼ ç»Ÿï¼Œè¿½æ±‚çªç ´æ€§åˆ›æ–°'
  },
  'INTP': {
    name: 'é€»è¾‘å­¦å®¶ INTP',
    title: 'åˆ›æ–°æ€ç»´çš„ç†è®ºæ¢ç´¢è€…',
    desc: 'ä½ æ˜¯ä¸€ä¸ªå¯Œæœ‰åˆ›é€ åŠ›çš„æ€æƒ³å®¶ï¼Œçƒ­çˆ±æ¢ç´¢æŠ½è±¡æ¦‚å¿µå’Œç†è®ºæ¡†æ¶ã€‚ä½ è¿½æ±‚é€»è¾‘çš„å®Œç¾å’ŒçŸ¥è¯†çš„æ·±åº¦ï¼Œå–„äºå‘ç°æ¨¡å¼å’Œå»ºç«‹è”ç³»ã€‚ä½ ç‹¬ç«‹æ€è€ƒï¼Œä¸è½»æ˜“æ¥å—ä¼ ç»Ÿè§‚å¿µï¼Œæ€»æ˜¯åœ¨å¯»æ‰¾æ›´å¥½çš„è§£é‡Šã€‚',
    strengths: ['é€»è¾‘åˆ†æèƒ½åŠ›å¼º', 'åˆ›æ–°æ€ç»´', 'æ±‚çŸ¥æ¬²æ—ºç››', 'å®¢è§‚å…¬æ­£'],
    weaknesses: ['å¯èƒ½è¿‡äºç†è®ºåŒ–', 'ç¤¾äº¤äº’åŠ¨è¾ƒå°‘', 'å®¹æ˜“å¿½è§†æƒ…æ„Ÿå› ç´ '],
    careers: ['è½¯ä»¶å·¥ç¨‹å¸ˆ', 'æ•°æ®ç§‘å­¦å®¶', 'å“²å­¦ç ”ç©¶è€…', 'æ¸¸æˆè®¾è®¡å¸ˆ', 'æŠ€æœ¯é¡¾é—®', 'å­¦æœ¯ç ”ç©¶å‘˜'],
    celeb: 'çˆ±å› æ–¯å¦',
    celebDesc: 'ä»¥é©å‘½æ€§çš„æ€ç»´æ–¹å¼é‡æ–°å®šä¹‰ç‰©ç†å­¦ï¼Œè¿½æ±‚çœŸç†ä¸ç•æƒå¨'
  },
  'ENTJ': {
    name: 'æŒ‡æŒ¥å®˜ ENTJ',
    title: 'å¤©ç”Ÿçš„é¢†å¯¼è€…',
    desc: 'ä½ æ˜¯ä¸€ä¸ªæœæ–­è‡ªä¿¡çš„é¢†å¯¼è€…ï¼Œå–„äºç»„ç»‡èµ„æºã€åˆ¶å®šæˆ˜ç•¥å¹¶å¸¦é¢†å›¢é˜Ÿè¾¾æˆç›®æ ‡ã€‚ä½ æœ‰å¼ºçƒˆçš„æˆå°±åŠ¨æœºï¼Œè¿½æ±‚æ•ˆç‡å’Œç»“æœã€‚ä½ æ•¢äºæŒ‘æˆ˜ï¼Œå–„äºæ¿€åŠ±ä»–äººï¼Œå¤©ç”Ÿå…·å¤‡å½±å“åŠ›å’Œå·å¬åŠ›ã€‚',
    strengths: ['é¢†å¯¼åŠ›å‡ºä¼—', 'å†³ç­–æœæ–­', 'ç›®æ ‡å¯¼å‘', 'å–„äºæ¿€åŠ±'],
    weaknesses: ['å¯èƒ½è¿‡äºå¼ºåŠ¿', 'ç¼ºä¹è€å¿ƒ', 'å¿½è§†ä»–äººæ„Ÿå—'],
    careers: ['ä¼ä¸šCEO', 'é¡¹ç›®ç»ç†', 'å¾‹å¸ˆ', 'ä¼ä¸šå®¶', 'æ”¿æ²»å®¶', 'ç®¡ç†é¡¾é—®'],
    celeb: 'å²è’‚å¤«Â·ä¹”å¸ƒæ–¯',
    celebDesc: 'ä»¥å¼ºå¤§çš„é¢†å¯¼åŠ›å’Œæ„¿æ™¯æ”¹å˜äº†å¤šä¸ªè¡Œä¸šï¼Œè¿½æ±‚æè‡´çš„å®Œç¾'
  },
  'ENTP': {
    name: 'è¾©è®ºå®¶ ENTP',
    title: 'å……æ»¡æ´»åŠ›çš„åˆ›æ–°è€…',
    desc: 'ä½ æ˜¯ä¸€ä¸ªæœºæ™ºçµæ´»çš„æ€æƒ³å®¶ï¼Œçƒ­çˆ±æ™ºåŠ›æŒ‘æˆ˜å’Œè¾©è®ºã€‚ä½ å–„äºä»ä¸åŒè§’åº¦çœ‹é—®é¢˜ï¼Œæ•¢äºæŒ‘æˆ˜ç°çŠ¶ï¼Œä¸æ–­å¯»æ‰¾æ–°çš„å¯èƒ½æ€§ã€‚ä½ å……æ»¡åˆ›æ„ï¼Œå–œæ¬¢æ‰“ç ´å¸¸è§„ï¼Œç”¨åˆ›æ–°çš„æ–¹å¼è§£å†³é—®é¢˜ã€‚',
    strengths: ['åˆ›æ„æ— é™', 'é€‚åº”æ€§å¼º', 'å–„äºè¾©è®º', 'æ€ç»´æ•æ·'],
    weaknesses: ['å¯èƒ½ç¼ºä¹æŒä¹…åŠ›', 'å®¹æ˜“åˆ†å¿ƒ', 'æœ‰æ—¶è¿‡äºäº‰è¾©'],
    careers: ['åˆ›ä¸šè€…', 'äº§å“ç»ç†', 'è¥é”€ç­–åˆ’', 'å¾‹å¸ˆ', 'å’¨è¯¢é¡¾é—®', 'åª’ä½“äºº'],
    celeb: 'é©¬å…‹Â·åæ¸©',
    celebDesc: 'ä»¥æœºæ™ºå¹½é»˜å’ŒçŠ€åˆ©çš„ç¤¾ä¼šè¯„è®ºè‘—ç§°ï¼Œå–„äºç”¨æ–°è§†è§’çœ‹é—®é¢˜'
  },
  'INFJ': {
    name: 'æå€¡è€… INFJ',
    title: 'å¯Œæœ‰è¿œè§çš„ç†æƒ³ä¸»ä¹‰è€…',
    desc: 'ä½ æ˜¯ä¸€ä¸ªæœ‰æ·±åº¦çš„ç†æƒ³ä¸»ä¹‰è€…ï¼Œå…³æ³¨äººç±»çš„æˆé•¿å’Œç¦ç¥‰ã€‚ä½ æœ‰å¼ºçƒˆçš„ç›´è§‰å’Œæ´å¯ŸåŠ›ï¼Œèƒ½å¤Ÿç†è§£ä»–äººçš„æ·±å±‚éœ€æ±‚ã€‚ä½ è¿½æ±‚æœ‰æ„ä¹‰çš„ç”Ÿæ´»ï¼Œå¸Œæœ›é€šè¿‡è‡ªå·±çš„åŠªåŠ›è®©ä¸–ç•Œå˜å¾—æ›´å¥½ã€‚',
    strengths: ['æ´å¯ŸåŠ›å¼º', 'å¯Œæœ‰åŒç†å¿ƒ', 'è¿½æ±‚æ„ä¹‰', 'åšæŒåŸåˆ™'],
    weaknesses: ['å®¹æ˜“ç†æƒ³åŒ–', 'å¯èƒ½è¿‡äºæ•æ„Ÿ', 'éš¾ä»¥æ¥å—æ‰¹è¯„'],
    careers: ['å¿ƒç†å’¨è¯¢å¸ˆ', 'ä½œå®¶', 'äººåŠ›èµ„æº', 'éè¥åˆ©ç»„ç»‡ç®¡ç†', 'æ•™è‚²å·¥ä½œè€…', 'ç¤¾ä¼šå·¥ä½œè€…'],
    celeb: 'é©¬ä¸Â·è·¯å¾·Â·é‡‘',
    celebDesc: 'ä»¥è¿œè§å’Œå¯¹äººç±»å¹³ç­‰çš„è¿½æ±‚ï¼Œæ¨åŠ¨äº†æ·±åˆ»çš„ç¤¾ä¼šå˜é©'
  },
  'INFP': {
    name: 'è°ƒåœè€… INFP',
    title: 'è¯—æ„çš„ç†æƒ³ä¸»ä¹‰è€…',
    desc: 'ä½ æ˜¯ä¸€ä¸ªå¯Œæœ‰æƒ³è±¡åŠ›å’ŒåŒç†å¿ƒçš„äººï¼Œè¿½æ±‚çœŸå®å’Œæœ‰æ„ä¹‰çš„ç”Ÿæ´»ã€‚ä½ æœ‰ä¸°å¯Œçš„å†…å¿ƒä¸–ç•Œï¼Œå–„äºç†è§£ä»–äººçš„æƒ…æ„Ÿã€‚ä½ é‡è§†ä¸ªäººä»·å€¼è§‚ï¼Œå¸Œæœ›æŒ‰ç…§è‡ªå·±çš„æ–¹å¼ç”Ÿæ´»ï¼ŒåŒæ—¶å¸®åŠ©ä»–äººå®ç°æ½œèƒ½ã€‚',
    strengths: ['å¯Œæœ‰åˆ›é€ åŠ›', 'åŒç†å¿ƒå¼º', 'å¿ äºä»·å€¼è§‚', 'é€‚åº”æ€§å¥½'],
    weaknesses: ['å¯èƒ½è¿‡äºç†æƒ³åŒ–', 'å®¹æ˜“è‡ªæˆ‘æ€€ç–‘', 'éš¾ä»¥é¢å¯¹å†²çª'],
    careers: ['ä½œå®¶', 'è‰ºæœ¯å®¶', 'å¿ƒç†å’¨è¯¢å¸ˆ', 'ç¤¾å·¥', 'äººæ–‡å­¦è€…', 'UXè®¾è®¡å¸ˆ'],
    celeb: 'å¨å»‰Â·èå£«æ¯”äºš',
    celebDesc: 'ä»¥æ·±åˆ»çš„äººæ€§æ´å¯Ÿå’Œä¸°å¯Œçš„æƒ…æ„Ÿè¡¨è¾¾ï¼Œåˆ›ä½œäº†æ°¸æ’çš„æ–‡å­¦ä½œå“'
  },
  'ENFJ': {
    name: 'ä¸»äººå…¬ ENFJ',
    title: 'å……æ»¡é­…åŠ›çš„å¼•å¯¼è€…',
    desc: 'ä½ æ˜¯ä¸€ä¸ªæœ‰æ„ŸæŸ“åŠ›çš„é¢†å¯¼è€…ï¼Œå–„äºæ¿€åŠ±å’Œå¼•å¯¼ä»–äººã€‚ä½ å…³å¿ƒä»–äººçš„æˆé•¿å’Œå‘å±•ï¼Œèƒ½å¤Ÿçœ‹åˆ°æ¯ä¸ªäººçš„æ½œåŠ›ã€‚ä½ æœ‰å¼ºçƒˆçš„ç¤¾ä¼šè´£ä»»æ„Ÿï¼Œå¸Œæœ›é€šè¿‡è‡ªå·±çš„å½±å“åŠ›åˆ›é€ ç§¯æçš„æ”¹å˜ã€‚',
    strengths: ['é¢†å¯¼åŠ›å¼º', 'å–„äºæ¿€åŠ±', 'åŒç†å¿ƒå¼º', 'æœ‰è´£ä»»æ„Ÿ'],
    weaknesses: ['å¯èƒ½è¿‡äºåœ¨æ„ä»–äºº', 'å®¹æ˜“è¿‡åº¦ä»˜å‡º', 'éš¾ä»¥æ‹’ç»'],
    careers: ['æ•™å¸ˆ', 'åŸ¹è®­å¸ˆ', 'äººåŠ›èµ„æºæ€»ç›‘', 'ç¤¾åŒºé¢†è¢–', 'å¿ƒç†å’¨è¯¢å¸ˆ', 'å…¬å…³ç»ç†'],
    celeb: 'å¥¥æ™®æ‹‰Â·æ¸©å¼—ç‘',
    celebDesc: 'ä»¥å¼ºå¤§çš„æ„ŸæŸ“åŠ›å’Œå¯¹ä»–äººçš„å…³æ€€ï¼Œå½±å“äº†æ•°ç™¾ä¸‡äººçš„ç”Ÿæ´»'
  },
  'ENFP': {
    name: 'ç«é€‰è€… ENFP',
    title: 'çƒ­æƒ…æ´‹æº¢çš„åˆ›æ–°è€…',
    desc: 'ä½ æ˜¯ä¸€ä¸ªå……æ»¡çƒ­æƒ…å’Œåˆ›æ„çš„äººï¼Œæ€»èƒ½çœ‹åˆ°ç”Ÿæ´»ä¸­çš„å¯èƒ½æ€§ã€‚ä½ å–„äºä¸äººå»ºç«‹è”ç³»ï¼Œèƒ½å¤Ÿæ¿€å‘ä»–äººçš„çƒ­æƒ…ã€‚ä½ è¿½æ±‚è‡ªç”±å’Œè‡ªæˆ‘è¡¨è¾¾ï¼Œå–œæ¬¢æ¢ç´¢æ–°äº‹ç‰©ï¼Œè®©å‘¨å›´çš„äººæ„Ÿåˆ°æŒ¯å¥‹ã€‚',
    strengths: ['çƒ­æƒ…æ„ŸæŸ“åŠ›å¼º', 'åˆ›æ„ä¸°å¯Œ', 'é€‚åº”æ€§å¼º', 'å–„äºæ²Ÿé€š'],
    weaknesses: ['å¯èƒ½ç¼ºä¹ä¸“æ³¨', 'å®¹æ˜“è¿‡åº¦æ‰¿è¯º', 'ä¸å–œæ¬¢å¤„ç†ç»†èŠ‚'],
    careers: ['å¸‚åœºè¥é”€', 'å…¬å…³', 'åˆ›æ„æ€»ç›‘', 'è®°è€…', 'åˆ›ä¸šè€…', 'æ¼”è‰ºäººå‘˜'],
    celeb: 'ç½—å®¾Â·å¨å»‰å§†æ–¯',
    celebDesc: 'ä»¥æ— é™çš„åˆ›æ„å’Œçƒ­æƒ…ï¼Œä¸ºä¸–ç•Œå¸¦æ¥æ¬¢ç¬‘å’Œæ„ŸåŠ¨'
  },
  'ISTJ': {
    name: 'ç‰©æµå¸ˆ ISTJ',
    title: 'å¯é åŠ¡å®çš„å®ˆæŠ¤è€…',
    desc: 'ä½ æ˜¯ä¸€ä¸ªè®¤çœŸè´Ÿè´£çš„å®è·µè€…ï¼Œæ³¨é‡äº‹å®å’Œç»†èŠ‚ã€‚ä½ åšäº‹æœ‰æ¡ç†ï¼Œéµå®ˆæ‰¿è¯ºï¼Œæ˜¯å›¢é˜Ÿä¸­æœ€å¯é çš„æˆå‘˜ã€‚ä½ å°Šé‡ä¼ ç»Ÿå’Œè§„åˆ™ï¼Œç›¸ä¿¡é€šè¿‡è„šè¸å®åœ°çš„åŠªåŠ›å¯ä»¥è¾¾æˆç›®æ ‡ã€‚',
    strengths: ['è´£ä»»å¿ƒå¼º', 'æ³¨é‡ç»†èŠ‚', 'å¯é å®ˆä¿¡', 'ç»„ç»‡èƒ½åŠ›å¼º'],
    weaknesses: ['å¯èƒ½è¿‡äºå›ºæ‰§', 'ä¸å–„äºå˜é€š', 'ä¸æ˜“è¡¨è¾¾æƒ…æ„Ÿ'],
    careers: ['ä¼šè®¡å¸ˆ', 'é¡¹ç›®ç®¡ç†', 'æ³•åŠ¡', 'å†›äºº', 'å…¬åŠ¡å‘˜', 'è´¨é‡æ§åˆ¶'],
    celeb: 'æ²ƒä¼¦Â·å·´è²ç‰¹',
    celebDesc: 'ä»¥ç¨³å¥åŠ¡å®çš„æŠ•èµ„é£æ ¼å’Œå¯¹ç»†èŠ‚çš„å…³æ³¨ï¼Œæˆä¸ºæœ€æˆåŠŸçš„æŠ•èµ„è€…'
  },
  'ISFJ': {
    name: 'å®ˆå«è€… ISFJ',
    title: 'æ¸©æš–å¯é çš„å®ˆæŠ¤è€…',
    desc: 'ä½ æ˜¯ä¸€ä¸ªæ¸©æš–ä½“è´´çš„å®ˆæŠ¤è€…ï¼Œé»˜é»˜åœ°å…³å¿ƒå’Œæ”¯æŒä»–äººã€‚ä½ æœ‰å¼ºçƒˆçš„è´£ä»»æ„Ÿï¼Œæ€»æ˜¯æŠŠä»–äººçš„éœ€æ±‚æ”¾åœ¨é¦–ä½ã€‚ä½ æ³¨é‡å’Œè°çš„äººé™…å…³ç³»ï¼Œå–„äºè®°ä½ä»–äººçš„å–œå¥½å’Œéœ€è¦ã€‚',
    strengths: ['ä½“è´´å…¥å¾®', 'è´£ä»»å¿ƒå¼º', 'å–„äºæ”¯æŒä»–äºº', 'è€å¿ƒç»†è‡´'],
    weaknesses: ['å¯èƒ½è¿‡äºè‡ªæˆ‘ç‰ºç‰²', 'éš¾ä»¥æ‹’ç»', 'ä¸å–„äºè¡¨è¾¾éœ€æ±‚'],
    careers: ['æŠ¤å£«', 'æ•™å¸ˆ', 'è¡Œæ”¿åŠ©ç†', 'å®¢æˆ·æœåŠ¡', 'äººåŠ›èµ„æº', 'ç¤¾å·¥'],
    celeb: 'ç‰¹è•¾èä¿®å¥³',
    celebDesc: 'ä»¥æ— ç§çš„å¥‰çŒ®å’Œå¯¹ä»–äººçš„å…³çˆ±ï¼Œæ„ŸåŠ¨äº†æ•´ä¸ªä¸–ç•Œ'
  },
  'ESTJ': {
    name: 'æ€»ç»ç† ESTJ',
    title: 'é«˜æ•ˆåŠ¡å®çš„ç»„ç»‡è€…',
    desc: 'ä½ æ˜¯ä¸€ä¸ªæœæ–­é«˜æ•ˆçš„ç»„ç»‡è€…ï¼Œå–„äºç®¡ç†å’Œæ‰§è¡Œã€‚ä½ é‡è§†ç§©åºå’Œæ•ˆç‡ï¼Œæœ‰æ¸…æ™°çš„æ˜¯éæ ‡å‡†ã€‚ä½ æ˜¯å¤©ç”Ÿçš„ç®¡ç†è€…ï¼Œèƒ½å¤Ÿå»ºç«‹æœ‰æ•ˆçš„ç³»ç»Ÿå¹¶ç¡®ä¿æ¯ä¸ªäººéƒ½åœ¨æ­£ç¡®çš„è½¨é“ä¸Šã€‚',
    strengths: ['ç»„ç»‡èƒ½åŠ›å¼º', 'å†³ç­–æœæ–­', 'æ•ˆç‡å¯¼å‘', 'ç›´æ¥å¦ç‡'],
    weaknesses: ['å¯èƒ½è¿‡äºå¼ºåŠ¿', 'ä¸å¤Ÿçµæ´»', 'å¿½è§†æƒ…æ„Ÿå› ç´ '],
    careers: ['ä¼ä¸šç®¡ç†è€…', 'å†›å®˜', 'æ³•å®˜', 'è´¢åŠ¡ç»ç†', 'é¡¹ç›®æ€»ç›‘', 'è¡Œæ”¿ç®¡ç†'],
    celeb: 'æ°å…‹Â·éŸ¦å°”å¥‡',
    celebDesc: 'ä»¥é«˜æ•ˆçš„ç®¡ç†å’Œæœæ–­çš„å†³ç­–ï¼Œå°†GEæ‰“é€ æˆå…¨çƒæœ€æœ‰ä»·å€¼çš„å…¬å¸'
  },
  'ESFJ': {
    name: 'æ‰§æ”¿å®˜ ESFJ',
    title: 'çƒ­å¿ƒå‘¨åˆ°çš„åè°ƒè€…',
    desc: 'ä½ æ˜¯ä¸€ä¸ªçƒ­å¿ƒè‚ çš„ç¤¾äº¤è¾¾äººï¼Œå–„äºç…§é¡¾ä»–äººçš„éœ€æ±‚ã€‚ä½ é‡è§†å’Œè°çš„äººé™…å…³ç³»ï¼Œæ„¿æ„ä¸ºå›¢é˜Ÿä»˜å‡ºã€‚ä½ æ˜¯å¤©ç”Ÿçš„ç»„ç»‡è€…ï¼Œèƒ½å¤Ÿè®©æ¯ä¸ªäººéƒ½æ„Ÿåˆ°è¢«å…³å¿ƒå’Œé‡è§†ã€‚',
    strengths: ['å–„äºå…³å¿ƒä»–äºº', 'ç»„ç»‡åè°ƒèƒ½åŠ›å¼º', 'å¿ è¯šå¯é ', 'ç¤¾äº¤èƒ½åŠ›å¼º'],
    weaknesses: ['è¿‡äºåœ¨æ„ä»–äººçœ‹æ³•', 'éš¾ä»¥æ¥å—æ‰¹è¯„', 'å¯èƒ½è¿‡åº¦å¹²æ¶‰'],
    careers: ['æ´»åŠ¨ç­–åˆ’', 'é”€å”®ç»ç†', 'æŠ¤å£«é•¿', 'æ•™å¸ˆ', 'ç¤¾åŒºå·¥ä½œè€…', 'å®¢æˆ·å…³ç³»ç»ç†'],
    celeb: 'æ³°å‹’Â·æ–¯å¨å¤«ç‰¹',
    celebDesc: 'ä»¥çœŸè¯šçš„äº’åŠ¨å’Œå¯¹ç²‰ä¸çš„å…³å¿ƒï¼Œå»ºç«‹äº†æ·±åšçš„æƒ…æ„Ÿè¿æ¥'
  },
  'ISTP': {
    name: 'é‰´èµå®¶ ISTP',
    title: 'å†·é™çµæ´»çš„å®è·µè€…',
    desc: 'ä½ æ˜¯ä¸€ä¸ªå†·é™åŠ¡å®çš„è¡ŒåŠ¨æ´¾ï¼Œå–„äºåˆ†æå’Œè§£å†³å®é™…é—®é¢˜ã€‚ä½ æœ‰æ•é”çš„è§‚å¯ŸåŠ›å’ŒåŠ¨æ‰‹èƒ½åŠ›ï¼Œå–œæ¬¢æ¢ç´¢äº‹ç‰©çš„è¿ä½œåŸç†ã€‚ä½ ç‹¬ç«‹è‡ªä¸»ï¼Œå–œæ¬¢æŒ‰è‡ªå·±çš„èŠ‚å¥è¡Œäº‹ã€‚',
    strengths: ['åŠ¨æ‰‹èƒ½åŠ›å¼º', 'å†·é™ç†æ€§', 'é€‚åº”æ€§å¼º', 'è§£å†³é—®é¢˜èƒ½åŠ›å¼º'],
    weaknesses: ['å¯èƒ½æ˜¾å¾—å†·æ¼ ', 'ä¸å–œæ¬¢é•¿æœŸæ‰¿è¯º', 'ä¸å–„äºè¡¨è¾¾æƒ…æ„Ÿ'],
    careers: ['å·¥ç¨‹å¸ˆ', 'é£è¡Œå‘˜', 'æœºæ¢°å¸ˆ', 'æ•°æ®åˆ†æå¸ˆ', 'æ€¥è¯ŠåŒ»ç”Ÿ', 'æ¢é™©å®¶'],
    celeb: 'è¿ˆå…‹å°”Â·ä¹”ä¸¹',
    celebDesc: 'ä»¥å†·é™çš„å¤´è„‘å’Œç²¾æ¹›çš„æŠ€æœ¯ï¼Œåœ¨å…³é”®æ—¶åˆ»å±•ç°å‡ºè‰²çš„è¡¨ç°'
  },
  'ISFP': {
    name: 'æ¢é™©å®¶ ISFP',
    title: 'æ¸©å’Œçµæ´»çš„è‰ºæœ¯å®¶',
    desc: 'ä½ æ˜¯ä¸€ä¸ªæ¸©å’Œæ•æ„Ÿçš„è‰ºæœ¯å®¶ï¼Œæœ‰ä¸°å¯Œçš„å®¡ç¾å’Œæ„Ÿå—åŠ›ã€‚ä½ æ´»åœ¨å½“ä¸‹ï¼Œçæƒœæ¯ä¸€ä¸ªä½“éªŒã€‚ä½ ä¸å–œæ¬¢å†²çªï¼Œè¿½æ±‚å’Œè°ä¸è‡ªç”±ï¼Œç”¨è‡ªå·±çš„æ–¹å¼è¡¨è¾¾å¯¹ç¾å¥½äº‹ç‰©çš„çƒ­çˆ±ã€‚',
    strengths: ['å®¡ç¾èƒ½åŠ›å¼º', 'çµæ´»é€‚åº”', 'å–„äºå€¾å¬', 'çœŸå®è‡ªç„¶'],
    weaknesses: ['å¯èƒ½å›é¿å†²çª', 'éš¾ä»¥åšé•¿æœŸè§„åˆ’', 'å®¹æ˜“å—æƒ…ç»ªå½±å“'],
    careers: ['è®¾è®¡å¸ˆ', 'æ‘„å½±å¸ˆ', 'å…½åŒ»', 'å¨å¸ˆ', 'ç†ç–—å¸ˆ', 'å›­è‰ºå¸ˆ'],
    celeb: 'è¿ˆå…‹å°”Â·æ°å…‹é€Š',
    celebDesc: 'ä»¥ç‹¬ç‰¹çš„è‰ºæœ¯æ„ŸçŸ¥å’Œè¡¨æ¼”å¤©èµ‹ï¼Œåˆ›é€ äº†æµè¡ŒéŸ³ä¹çš„æ–°çºªå…ƒ'
  },
  'ESTP': {
    name: 'ä¼ä¸šå®¶ ESTP',
    title: 'ç²¾åŠ›å……æ²›çš„è¡ŒåŠ¨æ´¾',
    desc: 'ä½ æ˜¯ä¸€ä¸ªå……æ»¡æ´»åŠ›çš„è¡ŒåŠ¨æ´¾ï¼Œå–„äºæŠŠæ¡æœºä¼šå’Œè§£å†³å³æ—¶é—®é¢˜ã€‚ä½ å–œæ¬¢åˆºæ¿€å’ŒæŒ‘æˆ˜ï¼Œèƒ½å¤Ÿåœ¨å‹åŠ›ä¸‹ä¿æŒå†·é™ã€‚ä½ ç›´æ¥å¦ç‡ï¼Œå–œæ¬¢å®é™…è¡ŒåŠ¨è€Œéç©ºè°ˆç†è®ºã€‚',
    strengths: ['è¡ŒåŠ¨åŠ›å¼º', 'å–„äºåº”å˜', 'ç¤¾äº¤èƒ½åŠ›å¼º', 'åŠ¡å®é«˜æ•ˆ'],
    weaknesses: ['å¯èƒ½å†²åŠ¨è¡Œäº‹', 'ä¸å–œæ¬¢ç†è®ºå’Œè®¡åˆ’', 'å®¹æ˜“æ— èŠ'],
    careers: ['é”€å”®', 'ä¼ä¸šå®¶', 'è¿åŠ¨å‘˜', 'æ€¥æ•‘äººå‘˜', 'è°ˆåˆ¤ä¸“å®¶', 'ç»çºªäºº'],
    celeb: 'å”çº³å¾·Â·ç‰¹æœ—æ™®',
    celebDesc: 'ä»¥æœæ–­çš„è¡ŒåŠ¨åŠ›å’ŒæŠŠæ¡æœºä¼šçš„èƒ½åŠ›ï¼Œåœ¨å•†ä¸šå’Œæ”¿æ²»é¢†åŸŸå–å¾—æˆåŠŸ'
  },
  'ESFP': {
    name: 'è¡¨æ¼”è€… ESFP',
    title: 'çƒ­æƒ…å¼€æœ—çš„å¨±ä¹å®¶',
    desc: 'ä½ æ˜¯ä¸€ä¸ªçƒ­æƒ…å¼€æœ—çš„è¡¨æ¼”è€…ï¼Œå–„äºç»™å‘¨å›´äººå¸¦æ¥æ¬¢ä¹ã€‚ä½ æ´»åœ¨å½“ä¸‹ï¼Œäº«å—ç”Ÿæ´»ä¸­çš„æ¯ä¸€åˆ»ã€‚ä½ æœ‰æå¼ºçš„æ„ŸæŸ“åŠ›ï¼Œèƒ½å¤Ÿè®©æ¯ä¸ªèšä¼šéƒ½å˜å¾—ç”ŸåŠ¨æœ‰è¶£ã€‚',
    strengths: ['ä¹è§‚å¼€æœ—', 'ç¤¾äº¤èƒ½åŠ›å¼º', 'é€‚åº”æ€§å¼º', 'å–„äºå¨±ä¹'],
    weaknesses: ['å¯èƒ½ç¼ºä¹ä¸“æ³¨', 'ä¸å–œæ¬¢ç†è®º', 'å›é¿è´Ÿé¢æƒ…ç»ª'],
    careers: ['æ¼”å‘˜', 'ä¸»æŒäºº', 'æ´»åŠ¨ç­–åˆ’', 'é”€å”®', 'æ—…æ¸¸é¡¾é—®', 'å¥èº«æ•™ç»ƒ'],
    celeb: 'ç›ä¸½è²Â·æ¢¦éœ²',
    celebDesc: 'ä»¥æ— ä¸ä¼¦æ¯”çš„é­…åŠ›å’Œå¨±ä¹å¤©èµ‹ï¼Œæˆä¸ºæ°¸æ’çš„æ–‡åŒ–ç¬¦å·'
  }
};

// ç»´åº¦ä¿¡æ¯
const dimInfo = {
  'EI': { name: 'èƒ½é‡æ¥æº', icon: 'âš¡', leftLabel: 'å¤–å‘ E', rightLabel: 'å†…å‘ I', bg: '#dbeafe', color: '#3b82f6' },
  'SN': { name: 'ä¿¡æ¯è·å–', icon: 'ğŸ‘ï¸', leftLabel: 'æ„Ÿè§‰ S', rightLabel: 'ç›´è§‰ N', bg: '#d1fae5', color: '#10b981' },
  'TF': { name: 'å†³ç­–æ–¹å¼', icon: 'âš–ï¸', leftLabel: 'æ€è€ƒ T', rightLabel: 'æƒ…æ„Ÿ F', bg: '#fef3c7', color: '#f59e0b' },
  'JP': { name: 'ç”Ÿæ´»æ€åº¦', icon: 'ğŸ¯', leftLabel: 'åˆ¤æ–­ J', rightLabel: 'æ„ŸçŸ¥ P', bg: '#fce7f3', color: '#ec4899' }
};

let idx = 0;
let answers = new Array(60).fill(null);
const dims = questions.map(q => q.dim);

function render() {
  const q = questions[idx];
  const info = dimInfo[q.dim];
  document.getElementById('current').textContent = idx + 1;
  document.getElementById('qNum').textContent = idx + 1;
  document.getElementById('progressFill').style.width = ((idx + 1) / 60 * 100) + '%';
  document.getElementById('dimTag').textContent = info.name;
  document.getElementById('dimTag').style.background = info.bg;
  document.getElementById('dimTag').style.color = info.color;
  document.getElementById('qText').textContent = q.text;

  let optHtml = '';
  q.options.forEach((opt, i) => {
    const selected = answers[idx] === i ? 'selected' : '';
    optHtml += `<div class="opt ${selected}" onclick="select(${i})"><div class="opt-radio"></div><div class="opt-text">${opt}</div></div>`;
  });
  document.getElementById('options').innerHTML = optHtml;
  document.getElementById('prevBtn').disabled = idx === 0;
  document.getElementById('nextBtn').textContent = idx === 59 ? 'æŸ¥çœ‹ç»“æœ' : 'ä¸‹ä¸€é¢˜';
}

function select(v) { answers[idx] = v; render(); if (idx < 59) setTimeout(() => nextQ(), 250); }
function prevQ() { if (idx > 0) { idx--; render(); } }
function nextQ() {
  if (answers[idx] === null) { alert('è¯·å…ˆé€‰æ‹©ä¸€ä¸ªé€‰é¡¹'); return; }
  if (idx < 59) { idx++; render(); } else showResult();
}

function exitTest() {
  if (confirm('ç¡®å®šé€€å‡ºï¼Ÿç­”æ¡ˆå°†ä¸ä¼šä¿å­˜ã€‚')) { goToHome(); }
}

function goToHome() {
  const userSource = sessionStorage.getItem('user_source');
  if (userSource === 'platform') {
    window.location.href = '../platform.html';
  } else {
    window.location.href = 'index.html';
  }
}

function getHomeButtonHtml() {
  const userSource = sessionStorage.getItem('user_source');
  if (userSource === 'platform') {
    return '<button class="restart-btn" onclick="goToHome()" style="margin-left:8px">è¿”å›æµ‹è¯•ä¸­å¿ƒ</button>';
  } else {
    return '<button class="restart-btn more-tests-btn" onclick="showMoreTests()" style="margin-left:8px">æ›´å¤šæµ‹è¯•</button>';
  }
}

function showMoreTests() {
  const modal = document.createElement('div');
  modal.className = 'modal-overlay';
  modal.innerHTML = `
    <div class="modal-content">
      <div class="modal-icon">ğŸ§‚</div>
      <h3>è§£é”æ›´å¤šä¸“ä¸šæµ‹è¯„</h3>
      <p>å®‡å®™è®¤çŸ¥ç›ç©¶æ‰€æä¾›å¤šç§å¿ƒç†æµ‹è¯„å·¥å…·ï¼š</p>
      <div class="modal-tests">
        <div class="modal-test-item">ğŸ’• äº²å¯†å…³ç³»å¿ƒç†æµ‹è¯„</div>
        <div class="modal-test-item">ğŸ§  æƒ…ç»ªæ™ºåŠ›æµ‹è¯„</div>
        <div class="modal-test-item">ğŸŒ¿ å‹åŠ›ä¸éŸ§æ€§æµ‹è¯„</div>
      </div>
      <p class="modal-tip">è´­ä¹°æµ‹è¯„åˆé›†ï¼Œè§£é”å…¨éƒ¨æµ‹è¯„å†…å®¹</p>
      <div class="modal-buttons">
        <button class="modal-btn primary" onclick="contactAdvisor()">è”ç³»é¡¾é—®å’¨è¯¢</button>
        <button class="modal-btn secondary" onclick="closeModal()">æš‚ä¸éœ€è¦</button>
      </div>
    </div>
  `;
  document.body.appendChild(modal);
  setTimeout(() => modal.classList.add('show'), 10);
}

function contactAdvisor() {
  alert('è¯·æ·»åŠ é¡¾é—®å¾®ä¿¡å’¨è¯¢è´­ä¹°åˆé›†');
  closeModal();
}

function closeModal() {
  const modal = document.querySelector('.modal-overlay');
  if (modal) { modal.classList.remove('show'); setTimeout(() => modal.remove(), 300); }
}

function calcScores() {
  const scores = { EI: 0, SN: 0, TF: 0, JP: 0 };
  answers.forEach((v, i) => {
    if (v === 1) scores[dims[i]]++;
  });
  return scores;
}

function getType(scores) {
  let type = '';
  type += scores.EI < 8 ? 'E' : 'I';
  type += scores.SN < 8 ? 'S' : 'N';
  type += scores.TF < 8 ? 'T' : 'F';
  type += scores.JP < 8 ? 'J' : 'P';
  return type;
}

function showResult() {
  document.getElementById('testPage').classList.remove('active');
  document.getElementById('resultPage').classList.add('active');

  const scores = calcScores();
  const typeKey = getType(scores);
  const result = RESULT_MAP[typeKey];

  const html = `
    <div class="card">
      <div class="type-badge">ä½ çš„MBTIç±»å‹</div>
      <div class="type-name">${result.name}</div>
      <div style="font-size:16px;color:var(--primary);margin-bottom:12px;">${result.title}</div>
      <div class="type-desc">${result.desc}</div>
    </div>

    <div class="card">
      <div class="section-title"><div class="section-icon" style="background:#dbeafe">ğŸ“Š</div>å››ç»´åº¦åˆ†æ</div>
      ${Object.keys(dimInfo).map(d => {
        const info = dimInfo[d];
        const score = scores[d];
        const pct = (score / 15) * 100;
        const leftPct = 100 - pct;
        return `
          <div class="dim-item">
            <div class="dim-header">
              <div class="dim-name"><div class="dim-icon" style="background:${info.bg}">${info.icon}</div>${info.name}</div>
              <div class="dim-score">${Math.round(leftPct)}% : ${Math.round(pct)}%</div>
            </div>
            <div class="dim-bar">
              <div class="dim-bar-center"></div>
              <div class="dim-bar-fill" style="width:${leftPct}%;background:${info.color}"></div>
            </div>
            <div class="dim-labels"><span>${info.leftLabel}</span><span>${info.rightLabel}</span></div>
          </div>
        `;
      }).join('')}
    </div>

    <div class="card">
      <div class="section-title"><div class="section-icon" style="background:#d1fae5">ğŸ’ª</div>ä¼˜åŠ¿ä¸æˆé•¿ç©ºé—´</div>
      <div style="margin-bottom:16px;font-weight:500;color:#059669;">æ ¸å¿ƒä¼˜åŠ¿</div>
      <div class="strength-list">
        ${result.strengths.map(s => `<div class="strength-item"><div class="strength-icon">âœ“</div><div>${s}</div></div>`).join('')}
      </div>
      <div style="margin:20px 0 16px;font-weight:500;color:#dc2626;">æˆé•¿ç©ºé—´</div>
      <div class="strength-list">
        ${result.weaknesses.map(w => `<div class="strength-item weakness-item"><div class="strength-icon">!</div><div>${w}</div></div>`).join('')}
      </div>
    </div>

    <div class="card">
      <div class="section-title"><div class="section-icon" style="background:#fef3c7">ğŸ’¼</div>é€‚åˆçš„èŒä¸šæ–¹å‘</div>
      <div class="career-grid">
        ${result.careers.map(c => `<div class="career-item">${c}</div>`).join('')}
      </div>
    </div>

    <div class="card">
      <div class="section-title"><div class="section-icon" style="background:#fce7f3">â­</div>åŒç±»å‹åäºº</div>
      <div class="celeb-box">
        <div class="celeb-avatar">ğŸŒŸ</div>
        <div class="celeb-info">
          <h4>${result.celeb}</h4>
          <p>${result.celebDesc}</p>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="section-title"><div class="section-icon" style="background:#e0e7ff">ğŸ’¡</div>èŒä¸šå‘å±•å»ºè®®</div>
      <div class="tip-item"><div class="tip-num">1</div><div class="tip-text">é€‰æ‹©èƒ½å¤Ÿå‘æŒ¥ä½ æ ¸å¿ƒä¼˜åŠ¿çš„å·¥ä½œç¯å¢ƒï¼Œé¿å…é•¿æœŸä»äº‹ä¸æ€§æ ¼ç›¸æ‚–çš„å·¥ä½œ</div></div>
      <div class="tip-item"><div class="tip-num">2</div><div class="tip-text">äº†è§£å¹¶æ¥çº³è‡ªå·±çš„æ€§æ ¼ç‰¹ç‚¹ï¼ŒåŒæ—¶æœ‰æ„è¯†åœ°å‘å±•éä¼˜åŠ¿é¢†åŸŸçš„èƒ½åŠ›</div></div>
      <div class="tip-item"><div class="tip-num">3</div><div class="tip-text">åœ¨å›¢é˜Ÿä¸­ï¼Œä¸»åŠ¨æ‰¿æ‹…ä¸æ€§æ ¼åŒ¹é…çš„è§’è‰²ï¼ŒåŒæ—¶å­¦ä¼šæ¬£èµå…¶ä»–ç±»å‹åŒäº‹çš„è´¡çŒ®</div></div>
    </div>

    <div class="card download-section">
      <button class="download-btn" onclick="downloadPDF()" id="dlBtn">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/></svg>
        ä¸‹è½½PDFæŠ¥å‘Š
      </button>
      <button class="restart-btn" onclick="restart()">é‡æ–°æµ‹è¯•</button>
      ${getHomeButtonHtml()}
    </div>
  `;

  document.getElementById('resultContent').innerHTML = html;
}

function restart() { if (confirm('ç¡®å®šè¦é‡æ–°æµ‹è¯•å—ï¼Ÿ')) location.reload(); }

async function downloadPDF() {
  const btn = document.getElementById('dlBtn');
  const loading = document.getElementById('loading');
  btn.disabled = true;
  btn.innerHTML = 'ç”Ÿæˆä¸­...';
  loading.classList.add('show');

  try {
    const scores = calcScores();
    const typeKey = getType(scores);
    const result = RESULT_MAP[typeKey];
    const date = new Date().toLocaleDateString('zh-CN');

    const pdfContainer = document.createElement('div');
    pdfContainer.style.cssText = 'position:absolute;left:-9999px;top:0;width:800px;background:#fff;padding:40px;font-family:"Noto Sans SC",sans-serif;';

    pdfContainer.innerHTML = `
      <div style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);padding:50px 40px;margin:-40px -40px 30px -40px;text-align:center;color:#fff;">
        <div style="font-size:16px;margin-bottom:10px;opacity:0.9;">å®‡å®™è®¤çŸ¥ç›ç©¶æ‰€ Â· Space Salt Lab</div>
        <div style="font-size:32px;font-weight:700;margin-bottom:15px;">èŒä¸šæ€§æ ¼æµ‹è¯„æŠ¥å‘Š</div>
        <div style="font-size:14px;opacity:0.8;">æµ‹è¯„æ—¥æœŸï¼š${date}</div>
      </div>
      <div style="background:#f8fafc;border-radius:16px;padding:30px;margin-bottom:25px;">
        <div style="color:#667eea;font-size:14px;margin-bottom:8px;">ä½ çš„MBTIç±»å‹</div>
        <div style="font-size:28px;font-weight:700;color:#1e293b;margin-bottom:8px;">${result.name}</div>
        <div style="font-size:16px;color:#667eea;margin-bottom:12px;">${result.title}</div>
        <div style="color:#64748b;font-size:14px;line-height:1.8;">${result.desc}</div>
      </div>
      <div style="margin-bottom:25px;">
        <div style="font-size:18px;font-weight:600;margin-bottom:15px;">å››ç»´åº¦åˆ†æ</div>
        ${Object.keys(dimInfo).map(d => {
          const info = dimInfo[d];
          const score = scores[d];
          const pct = Math.round((score / 15) * 100);
          const leftPct = 100 - pct;
          return `<div style="margin-bottom:16px;"><div style="display:flex;justify-content:space-between;margin-bottom:6px;"><span>${info.name}</span><span>${leftPct}% : ${pct}%</span></div><div style="display:flex;justify-content:space-between;font-size:12px;color:#64748b;"><span>${info.leftLabel}</span><span>${info.rightLabel}</span></div></div>`;
        }).join('')}
      </div>
      <div style="margin-bottom:25px;">
        <div style="font-size:18px;font-weight:600;margin-bottom:15px;">é€‚åˆçš„èŒä¸šæ–¹å‘</div>
        <div style="display:flex;flex-wrap:wrap;gap:10px;">${result.careers.map(c => `<div style="padding:10px 16px;background:#ede9fe;border-radius:8px;font-size:14px;">${c}</div>`).join('')}</div>
      </div>
      <div style="background:#f8fafc;border-radius:12px;padding:20px;text-align:center;color:#94a3b8;font-size:12px;">
        <div style="margin-bottom:8px;font-weight:500;">å®‡å®™è®¤çŸ¥ç›ç©¶æ‰€ Â· Space Salt Lab</div>
        <div>æœ¬æŠ¥å‘Šä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆå¿ƒç†è¯Šæ–­æˆ–èŒä¸šå»ºè®®</div>
      </div>
    `;

    document.body.appendChild(pdfContainer);
    await document.fonts.ready;
    await new Promise(r => setTimeout(r, 300));

    const canvas = await html2canvas(pdfContainer, { scale: 2, useCORS: true, backgroundColor: '#ffffff' });
    document.body.removeChild(pdfContainer);

    const { jsPDF } = window.jspdf;
    const pdf = new jsPDF('p', 'mm', 'a4');
    const imgData = canvas.toDataURL('image/jpeg', 0.95);
    const pdfW = 210, pdfH = 297;
    const imgW = canvas.width, imgH = canvas.height;
    const ratio = imgW / imgH;
    let finalW = pdfW - 20;
    let finalH = finalW / ratio;

    if (finalH <= pdfH - 20) {
      pdf.addImage(imgData, 'JPEG', 10, 10, finalW, finalH);
    } else {
      let remainingH = imgH, srcY = 0;
      const pagePixelH = (pdfH - 20) / finalH * imgH;
      while (remainingH > 0) {
        const sliceH = Math.min(remainingH, pagePixelH);
        const sliceCanvas = document.createElement('canvas');
        sliceCanvas.width = imgW;
        sliceCanvas.height = sliceH;
        sliceCanvas.getContext('2d').drawImage(canvas, 0, srcY, imgW, sliceH, 0, 0, imgW, sliceH);
        const sliceData = sliceCanvas.toDataURL('image/jpeg', 0.95);
        if (srcY > 0) pdf.addPage();
        pdf.addImage(sliceData, 'JPEG', 10, 10, finalW, finalW / (imgW / sliceH));
        srcY += sliceH;
        remainingH -= sliceH;
      }
    }

    pdf.save(`èŒä¸šæ€§æ ¼æµ‹è¯„æŠ¥å‘Š_${typeKey}_${date}.pdf`);
  } catch (e) {
    console.error(e);
    alert('PDFç”Ÿæˆå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
  } finally {
    btn.disabled = false;
    btn.innerHTML = '<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/></svg> ä¸‹è½½PDFæŠ¥å‘Š';
    loading.classList.remove('show');
  }
}

render();
</script>
</body>
</html>
